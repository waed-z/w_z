<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine's Day Invitation ğŸ’•</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Georgia',serif;background:linear-gradient(135deg,#ff6b9d,#ff8cc8,#ffb6d9,#ffc0e0);min-height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;}

/* floating */
.flowers,.hearts{
    position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;
}
.flower,.heart{position:absolute;font-size:25px;opacity:0.4;animation:floatDown 10s linear infinite;}
@keyframes floatDown{0%{transform:translateY(-10vh);}100%{transform:translateY(110vh);}}

/* containers */
.container{position:absolute;text-align:center;background:rgba(255,255,255,0.95);padding:40px;border-radius:20px;box-shadow:0 20px 60px rgba(255,107,157,0.3);max-width:500px;z-index:10;transition:opacity 0.6s ease;}
.hidden{opacity:0;pointer-events:none;}

/* buttons */
.btn{padding:15px 30px;border:none;border-radius:50px;font-weight:bold;cursor:pointer;transition:all 0.5s cubic-bezier(.34,1.56,.64,1);}
.btn-yes{background:linear-gradient(135deg,#ff6b9d,#ff8cc8);color:white;}
.btn-no{background:linear-gradient(135deg,#ff4757,#ff6b81);color:white;}
.intro-btn{background:#d63384;color:white;margin-top:20px;}

/* images */
.gif-container img{width:100%;max-width:300px;border-radius:15px;margin-bottom:20px;}

/* success text */
.main-celebration{font-size:1.8em;color:#ff6b9d;font-weight:bold;}
.sub-message{font-size:1.2em;color:#ff8cc8;margin-top:8px;}
.love-quote{font-size:1em;color:#d63384;margin-top:10px;text-align:center;}

/* celebration side pics */
.celebration-images{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:5;}
.celebration-img{position:absolute;width:140px;height:140px;background-size:cover;background-position:center;border-radius:15px;box-shadow:0 10px 30px rgba(255,107,157,0.4);animation:floatSoft 4s ease-in-out infinite alternate;}
@keyframes floatSoft{from{transform:translateY(0px);}to{transform:translateY(-15px);}}

/* Curtains */
.curtain{position:fixed;top:0;width:50%;height:100%;background:#ff8cc8;z-index:999;transition:all 1s ease-in-out;}
#curtain-left{left:0;}
#curtain-right{right:0;}
.curtain-open{width:0;}
</style>
</head>
<body>

<!-- Curtains -->
<div id="curtain-left" class="curtain"></div>
<div id="curtain-right" class="curtain"></div>

<div class="flowers" id="flowers"></div>
<div class="hearts" id="hearts"></div>
<div class="celebration-images" id="celebrationImages"></div>

<!-- Audio -->
<audio id="itsjustus" loop>
    <source src="./itsjustus.mp3" type="audio/mpeg">
</audio>
<audio id="neverland">
    <source src="./neverland.mp3" type="audio/mpeg">
</audio>

<!-- INTRO SCREEN -->
<div class="container" id="introScreen">
    <h1>ğŸ¶ Romantic song incoming... ğŸ’•</h1>
    <button class="btn intro-btn" onclick="startExperience()">Start the magic âœ¨</button>
</div>

<!-- MAIN SCREEN -->
<div class="container hidden" id="mainScreen">
    <div id="app"></div>
</div>

<!-- NEVERLAND SCREEN -->
<div class="container hidden" id="neverlandScreen">
    <div class="gif-container">
        <img src="./yeonjun4.jpg" alt="Yeonjun4">
    </div>
    <div class="love-quote" style="font-size:1.2em;margin-top:15px;">
        Neverland my love, now I bid you goodbye, and I'm free falling â¤ï¸ğŸ’–âœ¨
    </div>
</div>

<script>
const NO_PHRASES = ["No ğŸ’”","Pretty please? ğŸ¥º","But we'd be so cute together! ğŸ’•","One more chance?","Don't break my heart :(","What about a maybe?","Please don't do this to me, I'm fragile","ANEESAAA!!!"];
const firstImg = "./download.jpeg";
const secondImg = "./yeonjun.jpeg";

let noClicks = 0;
let takeover = false;
let isValentine = false;

function startExperience(){
    openCurtains(); // curtains open on start
    const audio = document.getElementById("itsjustus");
    audio.currentTime = 59; // 0:59
    audio.play();
    document.getElementById("introScreen").classList.add("hidden");
    setTimeout(()=>{document.getElementById("mainScreen").classList.remove("hidden"); render();},600);
}

function render(){
    const app = document.getElementById("app");
    if(!isValentine){
        let yesScale = 1 + (noClicks*0.07);
        if(takeover) yesScale = 3.5;
        let noScale = takeover ? 0.05 : 1;

        app.innerHTML=`
        <div class="gif-container"><img src="${firstImg}"></div>
        <h1>Will you be my Valentine? ğŸ’•</h1>
        <div style="display:flex;gap:20px;justify-content:center;margin-top:20px;">
            <button class="btn btn-yes" style="transform:scale(${yesScale});" onclick="handleYes()">
                Obviously you're the most charming, gentle, kind, amazing, tall, big biceped, understanding person ever ğŸ’
            </button>
            <button class="btn btn-no" style="transform:scale(${noScale});" onclick="handleNo()">
                ${NO_PHRASES[Math.min(noClicks,NO_PHRASES.length-1)]}
            </button>
        </div>
        `;
    } else {
        app.innerHTML=`
        <div class="gif-container"><img src="${secondImg}"></div>
        <div class="success-message">
            <div class="main-celebration">ğŸ’• YES! I knew you'd say yes ğŸ˜ ğŸ’•</div>
            <div class="sub-message">I'm so amazing ğŸ˜† I mean you're amazing ğŸ˜˜ ğŸŒ¹ğŸ’–âœ¨</div>
            <button class="btn intro-btn" onclick="goToNeverland()">Press if you think I'm the best non-egotistical person ever ğŸ’–(Press if you love yj)</button>
        </div>
        `;
        createCelebrationImages();
    }
}

function handleNo(){ if(noClicks < NO_PHRASES.length-1) noClicks++; else takeover = true; render(); }
function handleYes(){ isValentine = true; render(); }

function goToNeverland(){
    document.getElementById("mainScreen").classList.add("hidden");
    document.getElementById("celebrationImages").innerHTML = "";
    const itsjustus = document.getElementById("itsjustus");
    itsjustus.pause();
    itsjustus.currentTime = 0;

    const neverland = document.getElementById("neverland");
    neverland.currentTime = 128; // 2:08
    neverland.play();

    setTimeout(()=>{
        neverland.pause();
        closeCurtains();
    }, 6000); // 6s = 2:08 to 2:14
    document.getElementById("neverlandScreen").classList.remove("hidden");
}

function createCelebrationImages() {
    const container = document.getElementById("celebrationImages");
    container.innerHTML = "";

    const leftStack = [
        {src:"./soobin1.jpeg", top:"5%", left:"20%"},
        {src:"./kai.jpg", top:"40%", left:"10%"},
        {src:"./yeonjun2.jpg", top:"75%", left:"1%"}
    ];
    const rightStack = [
        {src:"./beomgyu.jpg", top:"5%", left:"70%"},
        {src:"./taehyun.jpg", top:"40%", left:"80%"},
        {src:"./yeonjun3.jpg", top:"75%", left:"90%"}
    ];
    [...leftStack,...rightStack].forEach(img=>{
        const el = document.createElement("div");
        el.className="celebration-img";
        el.style.backgroundImage=`url(${img.src})`;
        el.style.top=img.top; el.style.left=img.left;
        container.appendChild(el);
    });
}

function createFloating(){
    const flowers=document.getElementById("flowers");
    const hearts=document.getElementById("hearts");
    for(let i=0;i<10;i++){
        const f=document.createElement("div");
        f.className="flower"; f.innerText="ğŸŒ¸"; f.style.left=Math.random()*100+"%";
        flowers.appendChild(f);
        const h=document.createElement("div");
        h.className="heart"; h.innerText="ğŸ’•"; h.style.left=Math.random()*100+"%";
        hearts.appendChild(h);
    }
}
createFloating();

// Curtains functions
function openCurtains(){
    document.getElementById('curtain-left').classList.add('curtain-open');
    document.getElementById('curtain-right').classList.add('curtain-open');
}
function closeCurtains(){
    document.getElementById('curtain-left').classList.remove('curtain-open');
    document.getElementById('curtain-right').classList.remove('curtain-open');
}

// Open curtains on page load
window.addEventListener('load', ()=>{
    setTimeout(()=>{ openCurtains(); }, 500);
});

// stop music when leaving site
document.addEventListener('visibilitychange', ()=>{
    const audio = document.getElementById('itsjustus');
    if(document.hidden) audio.pause();
});
</script>
</body>
</html>

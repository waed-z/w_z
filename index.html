<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Georgia',serif;background:linear-gradient(135deg,#ff6b9d,#ff8cc8,#ffb6d9,#ffc0e0);min-height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;}

/* floating */
.flowers,.hearts{
    position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;
}
.flower,.heart{position:absolute;font-size:25px;opacity:0.4;animation:floatDown 10s linear infinite;}
.flower{animation:floatDown 8s linear infinite,rotate 4s linear infinite;}
.heart{animation:floatDown 6s linear infinite,pulsate 2s ease-in-out infinite;}
@keyframes rotate{from{transform:rotate(0deg);}to{transform:rotate(360deg);} }
@keyframes pulsate{0%,100%{transform:scale(1);}50%{transform:scale(1.1);} }
@keyframes floatDown{0%{transform:translateY(-10vh);}100%{transform:translateY(110vh);} }

/* containers */
.container{position:absolute;text-align:center;background:rgba(255,255,255,0.95);padding:10px;border-radius:20px;box-shadow:0 20px 60px rgba(255,107,157,0.3);width:90%;max-width:400px;z-index:10;transition:opacity 0.6s ease;}
.hidden{opacity:0;pointer-events:none;}
.fade-in{animation:fadeIn 0.8s forwards;}
.fade-out{animation:fadeOut 0.8s forwards;}
@keyframes fadeIn{from{opacity:0;transform:scale(0.95);}to{opacity:1;transform:scale(1);} }
@keyframes fadeOut{from{opacity:1;transform:scale(1);}to{opacity:0;transform:scale(0.95);} }

/* buttons */
.btn{padding:10px 16px;border:none;border-radius:50px;font-weight:bold;font-size:14px;cursor:pointer;transition:all 0.5s cubic-bezier(.34,1.56,.64,1);position:relative;overflow:hidden;line-height:1.2;min-height:44px;}
.btn-yes{background:linear-gradient(135deg,#ff6b9d,#ff8cc8);color:white;transition:all 0.3s cubic-bezier(.34,1.56,.64,1);}
.btn-yes:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 15px 40px rgba(255,107,157,0.5);}
.btn-yes:active{transform:translateY(-1px) scale(0.98);}
.btn-no{background:linear-gradient(135deg,#ff4757,#ff6b81);color:white;transition:all 0.3s cubic-bezier(.34,1.56,.64,1);}
.btn-no:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 15px 40px rgba(255,71,87,0.5);}
.btn-no:active{transform:translateY(-1px) scale(0.98);}
.intro-btn{background:#d63384;color:white;margin-top:20px;}

/* images */
.gif-container img{width:100%;max-width:180px;border-radius:15px;margin-bottom:12px;}

/* Mobile responsiveness */
@media screen and (max-width: 600px) {
    .container {
        width: 98%;
        padding: 6px;
        max-width: 350px;
    }
    .celebration-img {
        width: 70px;
        height: 70px;
    }
    .flower, .heart {
        font-size: 18px;
    }
    .btn {
        padding: 8px 12px;
        font-size: 12px;
        margin: 2px;
        line-height:1.1;
        min-height:40px;
    }
    h1 {
        font-size: 1.4em;
        margin-bottom: 10px;
    }
    .main-celebration {
        font-size: 1.4em;
    }
    .sub-message {
        font-size: 1em;
    }
    .love-quote {
        font-size: 0.9em;
    }
    .gif-container img {
        max-width: 120px;
    }
}

@media screen and (max-width: 400px) {
    .btn {
        padding: 6px 10px;
        font-size: 11px;
        line-height:1.0;
        min-height:36px;
    }
    h1 {
        font-size: 1.2em;
    }
    .celebration-img {
        width: 50px;
        height: 50px;
    }
}

/* success text */
.main-celebration{font-size:1.4em;color:#ff6b9d;font-weight:bold;line-height:1.2;}
.sub-message{font-size:1.0em;color:#ff8cc8;margin-top:6px;line-height:1.2;}
.love-quote{font-size:0.9em;color:#d63384;margin-top:8px;text-align:center;line-height:1.3;}

/* celebration side pics */
.celebration-images{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:5;}
.celebration-img{position:absolute;width:100px;height:100px;background-size:cover;background-position:center;border-radius:15px;box-shadow:0 10px 30px rgba(255,107,157,0.4);animation:floatSoft 4s ease-in-out infinite alternate;transition:all 0.3s ease;}
.celebration-img:hover{transform:scale(1.05) translateY(-20px);box-shadow:0 15px 40px rgba(255,107,157,0.6);}
.btn::before{content:'';position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:rgba(255,255,255,0.3);transform:translate(-50%,-50%);transition:width 0.6s,height 0.6s;}
.btn:hover::before{width:300px;height:300px;}

/* Curtains */
.curtain{position:fixed;top:0;width:50%;height:100%;background:linear-gradient(#b30059,#ff6b9d);z-index:999;transition:all 1s cubic-bezier(0.4,0,0.2,1);transform-origin:top center;box-shadow:inset 0 0 50px rgba(0,0,0,0.3);}
#curtain-left{left:0;}
#curtain-right{right:0;}
.curtain-open{width:0;}
.curtain::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:repeating-linear-gradient(90deg,transparent,transparent 2px,rgba(255,255,255,0.1) 2px,rgba(255,255,255,0.1) 4px);pointer-events:none;}
@keyframes sway{0%{transform:rotateY(0deg);}50%{transform:rotateY(1deg);}100%{transform:rotateY(0deg);} }
</style>
</head>
<body>

<!-- Curtains -->
<div id="curtain-left" class="curtain"></div>
<div id="curtain-right" class="curtain"></div>

<div class="flowers" id="flowers"></div>
<div class="hearts" id="hearts"></div>
<div class="celebration-images" id="celebrationImages"></div>

<!-- Audio -->
<audio id="itsjustus" loop>
    <source src="./itsjustus.mp3" type="audio/mpeg">
</audio>
<audio id="neverland">
    <source src="./neverland.mp3" type="audio/mpeg">
</audio>

<!-- INTRO SCREEN -->
<div class="container" id="introScreen">
    <h1>üé∂ Romantic song incoming... üíï</h1>
    <button class="btn intro-btn" onclick="startExperience()">Start the magic ‚ú®</button>
</div>

<!-- MAIN SCREEN -->
<div class="container hidden" id="mainScreen">
    <div id="app"></div>
</div>

<!-- NEVERLAND SCREEN -->
<div class="container hidden" id="neverlandScreen">
    <div class="gif-container">
        <img src="./yeonjun4.jpg" alt="Yeonjun4">
    </div>
    <div class="love-quote" style="font-size:1.2em;margin-top:15px;">
        Neverland my love, now I bid you goodbye, and I'm free falling ‚ù§Ô∏èüíñ‚ú®
    </div>
</div>

<script>
const NO_PHRASES = ["No üíî","Pretty please? ü•∫","But we'd be so cute together! üíï","One more chance?","Don't break my heart :(","What about a maybe?","Please don't do this to me, I'm fragile","ANEESAAA!!!"];
const firstImg = "./download.jpeg";
const secondImg = "./yeonjun.jpeg";

let noClicks = 0;
let takeover = false;
let isValentine = false;

function startExperience(){
    openCurtains();
    const audio = document.getElementById("itsjustus");
    audio.currentTime = 59; 
    audio.play();
    
    document.getElementById("introScreen").classList.add('fade-out');
    
    setTimeout(()=>{
        document.getElementById("introScreen").classList.add("hidden");
        document.getElementById("mainScreen").classList.remove("hidden");
        document.getElementById("mainScreen").classList.add('fade-in');
        render();
    },800);
}

function render(){
    const app = document.getElementById("app");
    if(!isValentine){
        let yesScale = 1 + (noClicks*0.04);
        if(takeover) yesScale = 2.0;
        let noScale = takeover ? 0.05 : 1;

        app.innerHTML=`
        <div class="gif-container"><img src="${firstImg}"></div>
        <h1>Will you be my Valentine? üíï</h1>
        <div style="display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:15px;">
            <button class="btn btn-yes" style="transform:scale(${yesScale});flex:1 1 auto;min-width:120px;max-width:280px;" onclick="handleYes()">
                Obviously you're the most charming, gentle, kind, amazing, tall, big biceped, understanding person ever üíù
            </button>
            <button class="btn btn-no" style="transform:scale(${noScale});flex:0 0 auto;min-width:80px;" onclick="handleNo()">
                ${NO_PHRASES[Math.min(noClicks,NO_PHRASES.length-1)]}
            </button>
        </div>
        `;
    } else {
        app.innerHTML=`
        <div class="gif-container"><img src="${secondImg}"></div>
        <div class="success-message">
            <div class="main-celebration">üíï YES! I knew you'd say yes üòÅ üíï</div>
            <div class="sub-message">I'm so amazing üòÜ I mean you're amazing üòò üåπüíñ‚ú®</div>
            <button class="btn intro-btn" onclick="goToNeverland()">Press if you think I'm the best non-egotistical person ever üíñ(Press if you love yj)</button>
        </div>
        `;
        createCelebrationImages();
    }
}

function handleNo(){ if(noClicks < NO_PHRASES.length-1) noClicks++; else takeover = true; render(); }
function handleYes(){ isValentine = true; render(); }

function goToNeverland(){
    document.getElementById("mainScreen").classList.add('fade-out');
    
    setTimeout(()=>{
        document.getElementById("mainScreen").classList.add("hidden");
        document.getElementById("celebrationImages").innerHTML = "";
        const itsjustus = document.getElementById("itsjustus");
        itsjustus.pause();
        itsjustus.currentTime = 0;

        const neverland = document.getElementById("neverland");
        neverland.currentTime = 128; 
        neverland.play();

        setTimeout(()=>{
            neverland.pause();
            closeCurtains();
        }, 6500);
        
        document.getElementById("neverlandScreen").classList.remove("hidden");
        document.getElementById("neverlandScreen").classList.add('fade-in');
        createFallingHearts();
    },800);
}

function createCelebrationImages() {
    const container = document.getElementById("celebrationImages");
    container.innerHTML = "";

    const w = window.innerWidth;
    const h = window.innerHeight;
    const isMobile = w <= 600;

    // Top row
    const topRow = [
        {src:"./soobin1.jpeg", top:isMobile? "15%" : "12%", left:isMobile? "0%" : "0%"},
        {src:"./kai.jpg", top:isMobile? "15%" : "12%", left:isMobile? "40%" : "42%"},
        {src:"./beomgyu.jpg", top:isMobile? "15%" : "12%", left:isMobile? "75%" : "80%"}
    ];

    // Bottom row - same distance from panel as top row
    const bottomRow = [
        {src:"./taehyun.jpg", top:isMobile? "15%" : "12%", left:isMobile? "0%" : "0%"},
        {src:"./yeonjun2.jpg", top:isMobile? "15%" : "12%", left:isMobile? "40%" : "42%"},
        {src:"./yeonjun3.jpg", top:isMobile? "15%" : "12%", left:isMobile? "75%" : "80%"}
    ];

    [...topRow, ...bottomRow].forEach((img, i)=>{
        const el = document.createElement("div");
        el.className = "celebration-img";
        el.style.backgroundImage = `url(${img.src})`;
        el.style.position = "absolute";   // ensure positioning works
        el.style.top = img.top;
        el.style.left = img.left;
        el.style.opacity = 1;             // make visible immediately
        el.style.transform = "scale(1)";  // normal size
        container.appendChild(el);
        
        setTimeout(()=>{
            el.style.transition = "top 1s ease-out, left 1s ease-out, opacity 1s ease-out, transform 0.8s ease-out";
            el.style.top = img.top;
            el.style.opacity = 1;
            el.style.transform = "scale(1.05)";
            setTimeout(()=>{
                el.style.transform = "scale(1)";
                el.style.animation = "floatSoft 4s ease-in-out infinite";
            },800);
        }, i*200);
    });
}


function createFloating(){
    const flowers=document.getElementById("flowers");
    const hearts=document.getElementById("hearts");
    for(let i=0;i<10;i++){
        const f=document.createElement("div");
        f.className="flower"; f.innerText="üå∏"; f.style.left=Math.random()*100+"%";
        flowers.appendChild(f);
        const h=document.createElement("div");
        h.className="heart"; h.innerText="üíï"; h.style.left=Math.random()*100+"%";
        hearts.appendChild(h);
    }
}
createFloating();

function createFallingHearts(){
    const container = document.getElementById("hearts");
    for(let i=0;i<20;i++){
        setTimeout(()=>{
            const heart = document.createElement("div");
            heart.className="heart";
            heart.innerText="üíñ";
            heart.style.left=Math.random()*100+"%";
            heart.style.animationDelay=Math.random()*2+"s";
            heart.style.fontSize=(20+Math.random()*15)+"px";
            heart.style.opacity="0.8";
            container.appendChild(heart);
            setTimeout(()=>heart.remove(),8000);
        }, i*200);
    }
}

function animateTextLetterByLetter(){
    const textElement = document.querySelector("#neverlandScreen .love-quote");
    const text = textElement.innerText;
    textElement.innerText = "";
    text.split('').forEach((letter,index)=>{
        setTimeout(()=>{textElement.innerText+=letter;textElement.style.opacity="1";}, index*100);
    });
}

function openCurtains(){
    document.getElementById('curtain-left').classList.add('curtain-open');
    document.getElementById('curtain-right').classList.add('curtain-open');
}
function closeCurtains(){
    document.getElementById('curtain-left').classList.remove('curtain-open');
    document.getElementById('curtain-right').classList.remove('curtain-open');
}

window.addEventListener('load', ()=>{ setTimeout(()=>{ openCurtains(); },500); });

document.addEventListener('visibilitychange', ()=>{
    const audio = document.getElementById('itsjustus');
    if(document.hidden) audio.pause();
});
</script>
</body>
</html>
